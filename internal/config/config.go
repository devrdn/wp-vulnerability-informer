package config

import "flag"

const (
	defaultBaseURL       = "https://www.wordfence.com/api/intelligence/v2/vulnerabilities/production"
	defaultBotChannelId  = -1001842465106
	defaultOwnerId       = 464058962
	defaultBotConfigPath = "config/bot/bot.yml"
)

type Config struct {
	PaginationLimit int
	BaseUrl         string
	Bot             BotConfig
}

type BotConfig struct {
	OwnerId       int
	ChannelId     int
	BotConfigPath string
}

func MustLoad() Config {
	var cfg Config

	flag.StringVar(&cfg.BaseUrl, "base-url", defaultBaseURL, "BaseUrl")
	flag.IntVar(&cfg.Bot.ChannelId, "channel-id", defaultBotChannelId, "Channel Id")
	flag.IntVar(&cfg.Bot.OwnerId, "owner-id", defaultOwnerId, "Owner Id")
	flag.StringVar(&cfg.Bot.BotConfigPath, "cfg-path", defaultBotConfigPath, "Bot Config Path")
	flag.Parse()

	return cfg
}
