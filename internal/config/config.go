package config

import "flag"

type BotConfig struct {
	OwnerId       int
	ChannelId     int
	BotConfigPath string
}

type Config struct {
	PaginationLimit int
	BaseUrl         string
	Bot             BotConfig
}

const (
	defaultPaginationLimit = 5
	defaultBaseURL         = "https://www.wordfence.com/threat-intel/vulnerabilities?page="
	defaultBotChannelId    = -1001842465106
	defaultOwnerId         = 464058962
	defaultBotConfigPath   = "config/informer/informer.yml"
)

func MustLoad() Config {
	var cfg Config

	flag.IntVar(&cfg.PaginationLimit, "pagination-limit", defaultPaginationLimit, "Pagination Limit")
	flag.StringVar(&cfg.BaseUrl, "base-url", defaultBaseURL, "BaseUrl")
	flag.IntVar(&cfg.Bot.ChannelId, "channel-id", defaultBotChannelId, "Channel Id")
	flag.IntVar(&cfg.Bot.OwnerId, "owner-id", defaultOwnerId, "Owner Id")
	flag.StringVar(&cfg.Bot.BotConfigPath, "cfg-path", defaultBotConfigPath, "Bot Config Path")
	flag.Parse()

	return cfg
}
