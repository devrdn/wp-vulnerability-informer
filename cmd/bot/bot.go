package main

import (
	"errors"
	tele "gopkg.in/telebot.v3"
	"gopkg.in/telebot.v3/layout"
)

type Bot struct {
	*tele.Bot
}

var (
	ErrFailedParseLayout = errors.New("bot: failed to parse bot layout")
	ErrFailedCreateBot   = errors.New("bot: failed to create new bot")
)

// NewBot creates a new Bot instance
func NewBot(configPath string) (*Bot, error) {
	lt, err := layout.New(configPath)
	if err != nil {
		return nil, ErrFailedParseLayout
	}

	b, err := tele.NewBot(lt.Settings())
	if err != nil {
		return nil, ErrFailedCreateBot
	}

	return &Bot{Bot: b}, nil
}
